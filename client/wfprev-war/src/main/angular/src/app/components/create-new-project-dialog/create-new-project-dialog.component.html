<div class="dialog-container">
  <div class="title-bar">
    <span>Create New Project</span>
  </div>
  <form [formGroup]="projectForm">
    <div class="dialog-content">
      <div class="form-row">
        <div class="form-field">
          <app-select-field
            label="Project Type"
            [options]="projectTypeOptions"
            [control]="projectForm.get('projectType')"
            id="projectType"
            placeholder="Select"
            [required]="true">
          </app-select-field>
        </div>
        <div class="form-field">
          <label for="projectName">Project Name<span class="required">*</span></label>
          <input type="text" id="projectName" formControlName="projectName" placeholder="Begin Typing"
            class="project-input" [matTooltip]="projectForm.get('projectName')?.value">
          <div class="error"
            *ngIf="projectForm.get('projectName')?.hasError('maxlength') && projectForm.get('projectName')?.touched">
            {{messages.maxLengthExceeded}}
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-field">
          <app-select-field
            label="Business Area"
            [options]="businessAreaOptions"
            [control]="projectForm.get('businessArea')"
            id="businessArea"
            placeholder="Select"
            [required]="true">
          </app-select-field>
        </div>
        <div class="form-field">
          <app-select-field
            label="Forest Region"
            [options]="forestRegionOptions"
            [control]="projectForm.get('forestRegion')"
            id="forestRegion"
            placeholder="Select"
            [required]="true">
          </app-select-field>
        </div>
        <div class="form-field">
          <label>Forest District</label>
          <select formControlName="forestDistrict" [matTooltip]="getForestDistrictCode(projectForm.get('forestDistrict')?.value)">
            <option value="">Select</option>
            <option *ngFor="let district of forestDistricts" [value]="district.orgUnitId">{{ district.orgUnitName }}
            </option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-field">
          <label>
            BC Parks Region<span class="required" *ngIf="hasValidator('bcParksRegion', Validators.required)">*</span>
          </label>
          <select formControlName="bcParksRegion" [matTooltip]="getBcParksRegionCode(projectForm.get('bcParksRegion')?.value)">
            <option value="">Select</option>
            <option *ngFor="let region of bcParksRegions" [value]="region.orgUnitId">{{ region.orgUnitName }}</option>
          </select>
        </div>
        <div class="form-field">
          <label>BC Parks Section</label>
          <select formControlName="bcParksSection" [matTooltip]="getBcParksSectionCode(projectForm.get('bcParksSection')?.value)">
            <option value="">Select</option>
            <option *ngFor="let section of bcParksSections" [value]="section.orgUnitId">{{ section.orgUnitName }}
            </option>
          </select>
        </div>
        <div class="form-field">
          <label>BCWS Fire Centre<span class="required">*</span></label>
          <select formControlName="fireCentre" [matTooltip]="getFireCentreCode(projectForm.get('fireCentre')?.value)">
            <option value="">Select</option>
            <option *ngFor="let item of fireCentres" [value]="item?.properties?.MOF_FIRE_CENTRE_ID">{{
              item?.properties.MOF_FIRE_CENTRE_NAME }}</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-field">
          <label>Closest Community<span class="required">*</span></label>
          <input type="text" formControlName="closestCommunity" placeholder="Begin Typing" class="project-input"
                 [matTooltip]="projectForm.get('closestCommunity')?.value">
          <div class="error"
            *ngIf="projectForm.get('closestCommunity')?.hasError('maxlength') && projectForm.get('closestCommunity')?.touched">
            {{messages.maxLengthExceeded}}
          </div>
        </div>
        <div class="form-field">
          <label>Project Lead<span class="required">*</span></label>
          <input type="text" formControlName="projectLead" placeholder="Begin Typing" class="project-input"
                 [matTooltip]="projectForm.get('projectLead')?.value">
          <div class="error"
            *ngIf="projectForm.get('projectLead')?.hasError('maxlength') && projectForm.get('projectLead')?.touched">
            {{messages.maxLengthExceeded}}
          </div>
        </div>
        <div class="form-field">
          <label>Project Lead Email</label>
          <input type="email" formControlName="projectLeadEmail" placeholder="Begin Typing" class="project-input"
                 [matTooltip]="projectForm.get('projectLeadEmail')?.value">
          <div class="error"
            *ngIf="projectForm.get('projectLeadEmail')?.hasError('email') && projectForm.get('projectLeadEmail')?.touched">
            {{messages.invalidEmail}}
          </div>
          <div class="error"
            *ngIf="projectForm.get('projectLeadEmail')?.hasError('maxlength') && projectForm.get('projectLeadEmail')?.touched">
            {{messages.maxLengthExceeded}}
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-field">
          <label>Lat/Long</label>
          <input type="text" formControlName="latLong" placeholder="Enter Manually or Paste from Clipboard"
            class="project-input" [matTooltip]="projectForm.get('latLong')?.value">
          <div class="error"
            *ngIf="projectForm.get('latLong')?.hasError('maxlength') && projectForm.get('latLong')?.touched">
            {{messages.maxLengthExceeded}}
          </div>
        </div>
        <div class="form-field">
          <label>Primary Objective<span class="required">*</span></label>
          <select formControlName="primaryObjective" [matTooltip]="getObjectiveCode(projectForm.get('primaryObjective')?.value)">
            <option value="">Select</option>
            <option *ngFor="let type of objectiveTypes" [value]="type.objectiveTypeCode">{{ type.description }}</option>
          </select>
        </div>
        <div class="form-field">
          <label>Secondary Objective</label>
          <select formControlName="secondaryObjective" [matTooltip]="getObjectiveCode(projectForm.get('secondaryObjective')?.value)">
            <option value="">Select</option>
            <option *ngFor="let type of objectiveTypes" [value]="type.objectiveTypeCode">{{ type.description }}</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="secondary-rationale">
          <label>Secondary Objective Rationale<span class="required">*</span></label>
          <textarea id="secondaryObjectiveRationale" placeholder="Begin Typing"
            formControlName="secondaryObjectiveRationale" rows="2" cdkTextareaAutosize cdkAutosizeMinRows="1"
            cdkAutosizeMaxRows="10" class="secondary-rationale"
            [matTooltip]="projectForm.get('secondaryObjectiveRationale')?.value"></textarea>
          <div class="error"
            *ngIf="projectForm.get('secondaryObjectiveRationale')?.hasError('maxlength') && projectForm.get('secondaryObjectiveRationale')?.touched">
            {{messages.maxLengthExceeded}}
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <div class="button-row">
        <button class="secondary" (click)="onCancel()">Cancel</button>
        <button class="primary" [disabled]="!projectForm.valid" (click)="onCreate()">
          Create
        </button>
      </div>
    </div>
  </form>
</div>